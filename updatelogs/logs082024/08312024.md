# 8/31/2024 - 3rd Update!

oops woke up a bit late today...

ok, we need to start fixing the appearance of the calandar events! so calandar events currently have to be in today (the calendar will only show today), so that needs to be fixed... ok i think we need to add date selection to the date section of the screen


```
original
x = i%7*55+25
y = i//7*40+115

invert
i = ((y-115)//40)*7+(x-25)//55
(i think)

account for offset
i = ((y-129)//40)*7+(x-967)//55

account for weird rendering
i = ((y-109)//40)*7+(x-940)//55
```

ok, its working, but the function that updates the date section of the screen is in the loop for being called every 5 seconds, which is sort of interfereing with this. however, instead of making a whole bunch of detections and stuff, im gonna add some form of scheduling sections of the screen to be processed (which should make things cleaner)

ok, so it’s “working” as in updating the section when necessary, but there’s a bit of weird behavior being that it requires me to wait around 3 seconds (I assume it’s probably waiting for the 5 second update) and mouse gets stuck on True...

well, typing that I think the problem might actually be I’m not updating that section telling me that info... wait a minute... ok somethings definetely broken, its being scheduled but isnt running... ok its now fixed! turns out it was something that shouldve worked but idk, its working now! im gonna go optimize some of the other stuff! ok, things have been a bit more optimized (reminders section is only updated when neccesary) and it looks pretty speedy!

ok, started some work on the date conversion things, but its a bit tricky to do...

---

so i just realized that the date section of the screen needs 6 weeks, not 5, so im gonna have to change a couple numbers

the day appears to be 1 number off but i cant tell if its timezones or numbers... ok, im gonna implement this! seems to be working? hmm this old calendar code is strange... hmm experinceing timezone issues... ok, confusing timezone issues have been fixed!

also, forgot to mention, switching between days seems to be working now?

---

ok, im back, time to make sure that calendar is working (by having multi day events), and continue the calendar UI stuff!

ok its working! it can use a bit of fixes with the calendar text and things going past 12AM, but its working!

hmm is the small text or medium text better? ok, did a mix of using the medium text and the small text! (also increased the distance a bit more because my vision is weird) ok so im currently thinking about how to edit

hmm gotta inverse this math

```
temp = time.mktime(time.localtime(event[1]))
temp = (temp - self.selectedCalendarDate*86400)/3600 + TIMEZONE_OFFSET
y1 = (temp-self.calendarOffset)*25/(self.calendarScale+0.000001) + 50

rmy = (temp-self.calendarOffset)*25/(self.calendarScale+0.000001) + 50
(rmy-50)*(self.calendarScale)/25+self.calendarOffset = temp

hmm math currently converts time to yPos, we need yPos to time

temp = (time.mktime(time.localtime(event[1])) - self.selectedCalendarDate*86400)/3600 + TIMEZONE_OFFSET
(rmy-50)*(self.calendarScale)/25+self.calendarOffset = temp
(rmy-50)*(self.calendarScale)/25+self.calendarOffset = (time.mktime(time.localtime(event[1])) - self.selectedCalendarDate*86400)/3600 + TIMEZONE_OFFSET

((rmy-50)*(self.calendarScale)/25+self.calendarOffset-TIMEZONE_OFFSET)*3600 = (time.mktime(time.localtime(event[1])) - self.selectedCalendarDate*86400)
((rmy-50)*(self.calendarScale)/25+self.calendarOffset-TIMEZONE_OFFSET)*3600+self.selectedCalendarDate*86400= time.mktime(time.localtime(event[1]))

```

it appears to be working? im gonna add click to create event now... ok its working!

![yay](</updatelogs/images/082024/08312024 - 1.png>)

---

ok im back, time to start work on editable events! so this may be a bit difficult because its not like reminders where each reminder has the same size. also, idk what to do with events that overlap with eachother. for now, i guess the thing we can do is to find where the user clicked, interate through the list of reminders, and we start editing the first event that has a range that the clicked time is inbetween. unfortunately, this prioritizes earlier events, which maybe a problem for when we have multiple events at the same time, but for now "dont think about it!" (problem for future me).

i should probably make it unable to make an event too close to another... hmm i should probably also make them different colors

ok it now brings up the popup screen! hmm the color generater seems baised towards red and green? strangely, they arent biased?

![hmm](</updatelogs/images/082024/08312024 - 2.png>)

---